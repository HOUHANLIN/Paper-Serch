<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <title>Paper-Serch · 使用教程</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script>
      (() => {
        const saved = localStorage.getItem('ps-theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        document.documentElement.dataset.theme = saved || (prefersDark ? 'dark' : 'light');
      })();
    </script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}" />
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <a href="{{ url_for('index') }}" class="brand-mark">
          <span class="dot"></span>
          <div>
            <div class="brand-sub">Paper-Serch</div>
            <div class="brand-title">Literature &amp; AI summaries</div>
          </div>
        </a>
        <nav class="nav-links">
          <a href="{{ url_for('index') }}">首页</a>
          <a href="{{ url_for('workflow') }}">自动工作流</a>
          <a href="{{ url_for('tutorial') }}" aria-current="page">使用教程</a>
        </nav>
      </div>
    </header>

    <main class="page">
      <div class="tutorial-page">
        <div class="headline">
          <div class="headline-pill">Guide · Web only</div>
          <h1 class="headline-title">用 Paper-Serch 快速整理文献</h1>
          <div class="subtitle">最常用的场景：写综述/开题时，检索一批文献并一键导出 <code>.bib</code>（可选生成中文摘要）。</div>
        </div>

        <section class="tutorial-hero">
          <div>
            <p class="hero-kicker">只需要浏览器：填表单 → 点按钮 → 拿到可用结果。</p>
            <h2 class="hero-title">选数据源与范围 → 写/生成检索式 → 开始检索 → 导出 BibTeX</h2>
            <p class="hero-desc">
              你只要把“要找什么”和“要找多少/多少年内”填清楚，点一次“开始检索并生成 BibTeX”，结果会自动汇总在页面底部，复制或导出文件即可用到 Zotero / Overleaf / LaTeX。
            </p>
          </div>
          <div class="hero-steps">
            <div class="hero-chip">写综述：批量收集</div>
            <div class="hero-chip">开题摸底：先跑一版</div>
            <div class="hero-chip">不懂检索式：AI 帮写</div>
          </div>
        </section>

        <div class="tutorial-grid">
          <div class="card tutorial-step">
            <div class="step-label">01</div>
            <h2>启动 Web 服务</h2>
            <p>第一次使用时，在仓库根目录运行（已启动可跳过）：</p>
            <pre><code>uv venv
source .venv/bin/activate
uv sync
uv run webapp.py</code></pre>
            <p>打开 <code>http://127.0.0.1:5000</code>，看到“文献检索”表单就对了。</p>
          </div>

          <div class="card tutorial-step">
            <div class="step-label">02</div>
            <h2>按你的需求填表单</h2>
            <ul>
              <li><strong>想先摸底：</strong>年份设 3～5 年、最大条数设 20～50，先跑一版看结果质量。</li>
              <li><strong>想做综述：</strong>年份设 5～10 年、最大条数设 80～200，再用更精确的检索式收敛。</li>
              <li>在“文献检索”里粘贴检索式（不会写也没关系，下一步用 AI 生成）。</li>
            </ul>
          </div>

          <div class="card tutorial-step">
            <div class="step-label">03</div>
            <h2>不会写检索式？让 AI 帮你生成</h2>
            <p>展开“需要 AI 协助生成检索式？”后：</p>
            <ul>
              <li>用一句话描述你要找什么（例如：“最近 5 年 肺癌 免疫治疗 临床试验 综述”）。</li>
              <li>点击“AI 生成检索式”，预览没问题后点“应用到检索式”。</li>
              <li>生成结果偏宽/偏窄时，改一两个关键词再生成一次即可。</li>
            </ul>
          </div>

          <div class="card tutorial-step">
            <div class="step-label">04</div>
            <h2>要不要中文摘要（可选）</h2>
            <ul>
              <li><strong>只想要 BibTeX：</strong>AI 配置可以先不管；即使提示“AI 摘要失败”，也不影响 BibTeX 生成与导出。</li>
              <li><strong>想要中文摘要：</strong>选择一个你能用的模型，并填写对应的 API Key；本地优先可选 <code>Ollama</code>。</li>
              <li>常用 Key/地址可写进 <code>.env</code>，以后打开页面基本不用再填。</li>
            </ul>
          </div>

          <div class="card tutorial-step">
            <div class="step-label">05</div>
            <h2>开始检索 → 查看结果 → 导出</h2>
            <ul>
              <li>点击“开始检索并生成 BibTeX”，右侧状态区会实时显示进度与报错信息。</li>
              <li>完成后在“文献列表”里点开条目查看摘要/元信息；不满意就回到表单改条件再跑。</li>
              <li>在“BibTeX 结果”区点“复制”或“导出文件”，把 <code>.bib</code> 导入 Zotero/EndNote 或直接用于 LaTeX。</li>
              <li>如果你想把一个方向拆成多个可检索子方向，去“自动工作流”页面继续。</li>
            </ul>
          </div>
        </div>
      </div>
    </main>

    <script>
      window.sourceDefaults = {};
      window.initialStatusLog = [];
    </script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
  </body>
</html>
